spring.application.name=quan-ly-noi-that-backend

# ----------------------------------------------------------------------
# 0. Server Configuration
# ----------------------------------------------------------------------
# Port sẽ được cung cấp bởi Render (mặc định 8081 cho local)
server.port=${PORT:8081}

# Cookies cho session khi chạy cross-site (Vercel -> Render)
# SameSite=None để trình duyệt gửi cookie qua domain khác, và Secure để chỉ gửi qua HTTPS
server.servlet.session.cookie.same-site=None
server.servlet.session.cookie.secure=${SESSION_COOKIE_SECURE:true}

# ----------------------------------------------------------------------
# 1. Cấu hình Database (SQL Server)
# ----------------------------------------------------------------------
# spring.datasource.url=jdbc:sqlserver://qlnt-api-server-2025.database.windows.net:1433;database=qlnt_db_azure;encrypt=true;trustServerCertificate=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30;
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=qlnt_db;encrypt=true;trustServerCertificate=true
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Thông tin đăng nhập sẽ được cung cấp bởi Render Secret Variables
# spring.datasource.username=${SPRING_DATASOURCE_USERNAME:qlntadmin@qlnt-api-server-2025,sa}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:nhacc123@}

# Disable H2 Console
spring.h2.console.enabled=false

# ----------------------------------------------------------------------
# 2. Cấu hình JPA/Hibernate
# ----------------------------------------------------------------------
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
# Tắt SQL logging để giảm lag (bật lại khi debug: spring.jpa.show-sql=true)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Đảm bảo tên bảng và cột dùng snake_case thống nhất
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy

# SQL Server specific optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ----------------------------------------------------------------------
# 3. Encoding Configuration
# ----------------------------------------------------------------------
spring.web.locale=vi_VN
spring.messages.encoding=UTF-8
spring.jackson.deserialization.FAIL_ON_UNKNOWN_PROPERTIES=false

# Cấu hình CORS - Sẽ được cung cấp bởi Render Environment Variables
# (Giá trị này phải là URL của frontend, ví dụ: https://frontend-cua-ban.onrender.com)
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001,http://localhost:5173,https://furniture-shop-36ld.vercel.app}

# Toggle Spring Security
app.security.enabled=false

# ----------------------------------------------------------------------
# 4. File Upload Configuration
# ----------------------------------------------------------------------
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# ----------------------------------------------------------------------
# 5. Cấu hình Email
# ----------------------------------------------------------------------
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Thông tin email sẽ được cung cấp bởi Render Secret Variables
spring.mail.username=${SPRING_MAIL_USERNAME:thanhlocys@gmail.com}
spring.mail.password=${SPRING_MAIL_PASSWORD:ayra tcxb qsyt nouj}

# ----------------------------------------------------------------------
# 6. Cấu hình JWT
# ----------------------------------------------------------------------
# Khóa bí mật JWT sẽ được cung cấp bởi Render Secret Variables
application.security.jwt.secret-key=${APPLICATION_SECURITY_JWT_SECRET_KEY:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
application.security.jwt.expiration=86400000
application.security.jwt.refresh-token.expiration=604800000

# ----------------------------------------------------------------------
# 7. Cloudinary Configuration
# ----------------------------------------------------------------------
# Cloud storage for product images
cloudinary.cloud-name=dbswbz19h
cloudinary.api-key=${CLOUDINARY_API_KEY:941978192739764}
cloudinary.api-secret=${CLOUDINARY_API_SECRET:cfxMvnGr0eexQrY_SHEgMuOhSGs}
vietqr.bankBin=970415
vietqr.bankNumber=109879673245
vietqr.accountName=VO THANH NHA
sepay.apiKey=${SEPAY_API_KEY:ZYN5VQGYXTO16HH0MBEGGW98LP24T7EVKSCQBHRDM7RWDUOSMREWDK3P0LJKQYXF}
sepay.secret=${SEPAY_SECRET:}
sepay.apiBaseUrl=${SEPAY_API_BASE:https://api.sepay.vn/}
sepay.publicBaseUrl=${PUBLIC_BASE_URL:https://angeles-unnuzzled-odessa.ngrok-free.dev}
sepay.callbackPath=/api/payments/webhook
sepay.returnUrl=${RETURN_URL:http://localhost:8080/}

# ----------------------------------------------------------------------
# 8. Logging Configuration
# ----------------------------------------------------------------------
# Giảm logging để tăng performance (chỉ log ERROR và WARN)
logging.level.root=WARN
logging.level.com.noithat.qlnt.backend=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
